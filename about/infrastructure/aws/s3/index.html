<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Simple Storage Service - afq-docs</title>
        <link href="../../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../../..">afq-docs</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Bibliography <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../../bibliography/diffusion-mri/">Diffusion MRI</a>
</li>
                                    
<li >
    <a href="../../../../bibliography/machine-learning/">Machine learning</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../license/">License</a>
</li>
                                    
<li >
    <a href="../../../funding/">Funding sources</a>
</li>
                                    
<li >
    <a href="../../../related/">Related projects</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Infrastructure</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../jupyterhub/">Jupyterhub</a>
</li>
            
<li >
    <a href="../../installing_python_packages/">Installing Python packages</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">AWS</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../getting_started/">Getting started</a>
</li>
            
<li class="active">
    <a href="./">Simple Storage Service</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                            <li >
                                <a rel="next" href="../getting_started/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="disabled">
                                <a rel="prev" >
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#using-amazon-web-services-s3">Using Amazon Web Services S3</a></li>
            <li><a href="#accessing-data-from-hcp">Accessing data from HCP</a></li>
            <li><a href="#uploading-data-to-s3">Uploading data to S3</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="using-amazon-web-services-s3">Using Amazon Web Services S3</h1>
<p>Data for our projects is stored on the <a href="https://aws.amazon.com/">Amazon Web Services</a> (AWS)
<a href="https://aws.amazon.com/s3/">Simple Storage Service</a> (S3).</p>
<h2 id="accessing-data-from-hcp">Accessing data from HCP</h2>
<p>The data from the Human Connectome project is provided as part of
<a href="https://aws.amazon.com/opendata/">AWS Open Data program</a>. The
HCP dataset entry in the program is provided <a href="https://registry.opendata.aws/hcp-openaccess/">here</a>.</p>
<p>To access the processed Human Connectome Project data, use the instructions
provided <a href="https://wiki.humanconnectome.org/display/PublicData/How+to+Get+Access+to+the+HCP+OpenAccess+Amazon+S3+Bucket">here</a></p>
<p>To add your HCP credentials to your configuration, you will need to use the
<a href="../getting_started/">command-line interface</a>.</p>
<pre><code>aws configure --profile hcp
</code></pre>
<p>We also have code in pyAFQ that automatically fetches/reads HCP data from S3.</p>
<h2 id="uploading-data-to-s3">Uploading data to S3</h2>
<p>Before uploading data to our S3 storage, please organize it in a 'BIDSish'
format on your local hard-drive. This will look something like this:</p>
<pre><code>|    &lt;study&gt;
|      ├-derivatives
|            ├-&lt;pipeline&gt;
|                ├── sub01
|                │   ├── sess01
|                │   │   ├── anat
|                │   │   │   ├── sub-01_sess-01_aparc+aseg.nii.gz
|                │   │   │   └── sub-01_sess-01_T1.nii.gz
|                │   │   └── dwi
|                │   │       ├── sub-01_sess-01_dwi.bvals
|                │   │       ├── sub-01_sess-01_dwi.bvecs
|                │   │       └── sub-01_sess-01_dwi.nii.gz
|                │   └── sess02
|                │       ├── anat
|                │       │   ├── sub-01_sess-02_aparc+aseg.nii.gz
|                │       │   └── sub-01_sess-02_T1w.nii.gz
|                │       └── dwi
|                │           ├── sub-01_sess-02_dwi.bvals
|                │           ├── sub-01_sess-02_dwi.bvecs
|                │           └── sub-01_sess-02_dwi.nii.gz
|                └── sub02
|                   ├── sess01
|                   │   ├── anat
|                   │       ├── sub-02_sess-01_aparc+aseg.nii.gz
|                   │   │   └── sub-02_sess-01_T1w.nii.gz
|                   │   └── dwi
|                   │       ├── sub-02_sess-01_dwi.bvals
|                   │       ├── sub-02_sess-01_dwi.bvecs
|                   │       └── sub-02_sess-01_dwi.nii.gz
|                   └── sess02
|                       ├── anat
|                       │   ├── sub-02_sess-02_aparc+aseg.nii.gz
|                       │   └── sub-02_sess-02_T1w.nii.gz
|                       └── dwi
|                           ├── sub-02_sess-02_dwi.bvals
|                           ├── sub-02_sess-02_dwi.bvecs
|                           └── sub-02_sess-02_dwi.nii.gz
</code></pre>
<p>Where <code>study</code> will be the name of the study and will also be the name we will
use for the bucket on S3. Instead of <code>pipeline</code> use a name of the preprocessing
pipeline that you used to process the data. For example, you might use <code>vista</code>,
if you processed the data with the vistalab tools or <code>dmriprep</code> if you use
dmriprep.</p>
<p>Here, we will use the command-line interface to upload the data
(see how to <a href="../getting_started/">get started</a> with that).</p>
<p>The command reference for S3 sub-commands is <a href="https://docs.aws.amazon.com/cli/latest/reference/s3/index.html">here</a>.
Specifically, to create a bucket on S3, you will use the <a href="https://docs.aws.amazon.com/cli/latest/reference/s3/mb.html">mb</a>:
sub-sub-command:</p>
<p>aws s3 mb s3://study</p>
<p>This command should be executed once. Then, uploading the data as a sync operation:</p>
<p>aws s3 sync path/to/study s3://study</p>
<p>The use of <code>sync</code> (rather than <code>aws s3 cp</code>) means that only new data would be
uploaded (for example, if repeated calls are made).</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
